# ğŸ‰ Railway éƒ¨ç½²æˆåŠŸï¼ä¸‹ä¸€æ­¥æ“ä½œæŒ‡å—

æ­å–œï¼ä½ çš„åç«¯æœåŠ¡å·²ç»æˆåŠŸéƒ¨ç½²åˆ° Railway.appã€‚ç°åœ¨è®©æˆ‘ä»¬å®Œæˆæ•´ä¸ªåº”ç”¨çš„é…ç½®å’Œæµ‹è¯•ã€‚

## ğŸ“ ç¬¬ä¸€æ­¥ï¼šè·å–ä½ çš„ Railway API åœ°å€

### 1.1 åœ¨ Railway ä»ªè¡¨æ¿ä¸­

1. è¿›å…¥ä½ çš„ Railway é¡¹ç›®
2. ç‚¹å‡» **Settings** â†’ **Domains**
3. å¤åˆ¶ä½ çš„åº”ç”¨ URLï¼Œæ ¼å¼ç±»ä¼¼ï¼š
   ```
   https://your-app-name.up.railway.app
   ```

### 1.2 è®°å½•ä½ çš„ API åœ°å€

**ä½ çš„ Railway API åœ°å€**ï¼š`https://_____________________.up.railway.app`

---

## ğŸ” ç¬¬äºŒæ­¥ï¼šæµ‹è¯• API ç«¯ç‚¹

åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™… URLï¼‰ï¼š

### 2.1 æµ‹è¯•å¥åº·æ£€æŸ¥

```bash
curl https://your-app-name.up.railway.app/health
```

**æœŸæœ›ç»“æœ**ï¼š

```json
{
  "status": "OK",
  "timestamp": "2024-12-19T12:00:00.000Z",
  "service": "è·‘æ­¥è¿½è¸ªå™¨åç«¯æœåŠ¡"
}
```

### 2.2 æµ‹è¯•æ³¨å†Œæ¥å£

```bash
curl -X POST https://your-app-name.up.railway.app/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "123456",
    "username": "testuser"
  }'
```

**æœŸæœ›ç»“æœ**ï¼š

```json
{
  "message": "ç”¨æˆ·æ³¨å†ŒæˆåŠŸ",
  "user": {
    "id": 1,
    "email": "test@example.com",
    "username": "testuser"
  }
}
```

### 2.3 æµ‹è¯•ç™»å½•æ¥å£

```bash
curl -X POST https://your-app-name.up.railway.app/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "123456"
  }'
```

**æœŸæœ›ç»“æœ**ï¼š

```json
{
  "message": "ç™»å½•æˆåŠŸ",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "email": "test@example.com",
    "username": "testuser"
  }
}
```

---

## ğŸ”§ ç¬¬ä¸‰æ­¥ï¼šæ›´æ–° Flutter åº”ç”¨é…ç½®

### 3.1 æ›´æ–° API é…ç½®æ–‡ä»¶

éœ€è¦ä¿®æ”¹ Flutter åº”ç”¨ä¸­çš„ API åœ°å€é…ç½®ï¼š

**æ–‡ä»¶**ï¼š`lib/core/constants/app_config.dart`

**å½“å‰é…ç½®**ï¼š

```dart
static const String baseUrl = 'http://localhost:3000';
```

**æ›´æ–°ä¸º**ï¼š

```dart
static const String baseUrl = 'https://your-app-name.up.railway.app';
```

### 3.2 å¤„ç† HTTPS è¯ä¹¦

Railway è‡ªåŠ¨æä¾› HTTPSï¼Œä½†å¯èƒ½éœ€è¦å¤„ç†è¯ä¹¦éªŒè¯ã€‚

---

## ğŸ“± ç¬¬å››æ­¥ï¼šé‡æ–°æ„å»º Android åº”ç”¨

### 4.1 ä½¿ç”¨æ„å»ºè„šæœ¬

```bash
# æ„å»ºè°ƒè¯•ç‰ˆæœ¬ï¼ˆç”¨äºæµ‹è¯•ï¼‰
./scripts/build-android.sh debug

# æ„å»ºå‘å¸ƒç‰ˆæœ¬ï¼ˆç”¨äºåˆ†å‘ï¼‰
./scripts/build-android.sh release
```

### 4.2 æ‰‹åŠ¨æ„å»ºï¼ˆå¤‡é€‰ï¼‰

```bash
# æ¸…ç†æ„å»ºç¼“å­˜
flutter clean

# è·å–ä¾èµ–
flutter pub get

# æ„å»º APK
flutter build apk --release
```

---

## âœ… ç¬¬äº”æ­¥ï¼šæµ‹è¯•å®Œæ•´åº”ç”¨

### 5.1 å®‰è£…æ–°æ„å»ºçš„ APK

1. å°† APK ä¼ è¾“åˆ°æ‰‹æœº
2. å®‰è£…å¹¶æ‰“å¼€åº”ç”¨
3. æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š

### 5.2 åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] **ç”¨æˆ·æ³¨å†Œ**ï¼šåˆ›å»ºæ–°è´¦æˆ·
- [ ] **ç”¨æˆ·ç™»å½•**ï¼šä½¿ç”¨æ³¨å†Œçš„è´¦æˆ·ç™»å½•
- [ ] **ä¸ªäººèµ„æ–™**ï¼š
  - [ ] ä¸Šä¼ å¤´åƒ
  - [ ] ä¿®æ”¹ç”¨æˆ·å
  - [ ] ç¼–è¾‘ä¸ªäººç®€ä»‹
  - [ ] ä¿å­˜æ›´æ”¹
- [ ] **æƒé™æ£€æŸ¥**ï¼šä½ç½®æƒé™ç”³è¯·
- [ ] **GPS å®šä½**ï¼šè·å–å½“å‰ä½ç½®
- [ ] **è·‘æ­¥åŠŸèƒ½**ï¼šå¼€å§‹è·‘æ­¥å¹¶æŸ¥çœ‹åœ°å›¾

---

## ğŸ¯ ç¬¬å…­æ­¥ï¼šä¼˜åŒ–å’Œè°ƒè¯•

### 6.1 å¦‚æœé‡åˆ°ç½‘ç»œé”™è¯¯

1. **æ£€æŸ¥ URL é…ç½®**ï¼šç¡®ä¿æ²¡æœ‰æ‹¼å†™é”™è¯¯
2. **æ£€æŸ¥ HTTPS**ï¼šRailway å¼ºåˆ¶ä½¿ç”¨ HTTPS
3. **æŸ¥çœ‹åº”ç”¨æ—¥å¿—**ï¼šä½¿ç”¨ `flutter logs` æŸ¥çœ‹è¯¦ç»†é”™è¯¯

### 6.2 å¦‚æœé‡åˆ° API é”™è¯¯

1. **æ£€æŸ¥ Railway æ—¥å¿—**ï¼š
   - Railway é¡¹ç›® â†’ **Deployments** â†’ ç‚¹å‡»æœ€æ–°éƒ¨ç½²
   - æŸ¥çœ‹ **Build Logs** å’Œ **Deploy Logs**
2. **æ£€æŸ¥ç¯å¢ƒå˜é‡**ï¼šç¡®ä¿æ‰€æœ‰å¿…éœ€çš„å˜é‡éƒ½å·²é…ç½®

### 6.3 å¸¸è§é—®é¢˜è§£å†³

- **CORS é”™è¯¯**ï¼šå·²åœ¨åç«¯é…ç½®ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°
- **JWT é”™è¯¯**ï¼šæ£€æŸ¥ JWT_SECRET ç¯å¢ƒå˜é‡
- **æ•°æ®åº“é”™è¯¯**ï¼šRailway ä¼šè‡ªåŠ¨åˆ›å»º SQLite æ•°æ®åº“

---

## ğŸŒŸ ç¬¬ä¸ƒæ­¥ï¼šåˆ†äº«å’Œéƒ¨ç½²

### 7.1 æµ‹è¯•å®Œæˆå

1. **è®°å½• Railway URL**ï¼šä¿å­˜ä½ çš„ API åœ°å€
2. **å¤‡ä»½ APK æ–‡ä»¶**ï¼šä¿å­˜æ„å»ºçš„åº”ç”¨æ–‡ä»¶
3. **åˆ†äº«ç»™æœ‹å‹**ï¼šè®©ä»–ä»¬æµ‹è¯•ä½ çš„åº”ç”¨

### 7.2 æœªæ¥æ›´æ–°

1. **ä»£ç æ›´æ–°**ï¼šæ¨é€åˆ° GitHub ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²
2. **ç‰ˆæœ¬ç®¡ç†**ï¼šå¯ä»¥åœ¨ Railway ä¸­æŸ¥çœ‹éƒ¨ç½²å†å²
3. **ç›‘æ§ä½¿ç”¨**ï¼šRailway æä¾›ä½¿ç”¨æƒ…å†µç»Ÿè®¡

---

## ğŸŠ å®Œæˆï¼

å½“æ‰€æœ‰æµ‹è¯•é€šè¿‡åï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„è·‘æ­¥è¿½è¸ªåº”ç”¨ï¼š

âœ… **äº‘ç«¯åç«¯æœåŠ¡**ï¼ˆRailway.appï¼‰  
âœ… **ç§»åŠ¨ç«¯ Android åº”ç”¨**  
âœ… **å®Œæ•´çš„ç”¨æˆ·ç³»ç»Ÿ**  
âœ… **ä¸ªäººèµ„æ–™ç®¡ç†**  
âœ… **GPS å®šä½å’Œåœ°å›¾**  
âœ… **å…è´¹çš„ç”Ÿäº§ç¯å¢ƒ**

**ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘**ï¼šé‚€è¯·æœ‹å‹æµ‹è¯•ï¼Œæ”¶é›†åé¦ˆï¼Œç»§ç»­å®Œå–„åŠŸèƒ½ï¼ğŸƒâ€â™‚ï¸

---

ğŸ’¡ **æç¤º**ï¼šä¿å­˜è¿™ä¸ªæ–‡æ¡£ï¼Œä»¥åæ›´æ–°åº”ç”¨æ—¶å¯ä»¥å‚è€ƒè¿™äº›æ­¥éª¤ã€‚
